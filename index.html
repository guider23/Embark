<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embark - Discover Your Feed</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
</head>
<body class="dark-theme">
    
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">EMBARK</div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Curating your feed...</div>
        </div>
    </div>

    
    <div class="main-container">
        
        <nav class="navbar">
            <div class="nav-content">
                
                <div class="nav-left">
                    <div class="logo-container">
                        <h1 class="logo">EMBARK</h1>
                        <span class="logo-subtitle">Discover</span>
                    </div>
                </div>

                
                <div class="nav-center">
                    <div class="search-wrapper">
                        <div class="search-container">
                            <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input type="text" id="search-input" placeholder="Talk to your feed..." readonly>
                            <div class="search-glow"></div>
                        </div>
                    </div>
                </div>

                
                <div class="nav-right">
                    <button id="theme-toggle" class="nav-button theme-toggle" aria-label="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </button>
                    
                    <button id="notifications-button" class="nav-button" aria-label="Notifications">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <div class="notification-dot"></div>
                    </button>
                    
                    <button id="dm-button" class="nav-button" aria-label="Direct Messages">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>

        
        <main class="main-content">
            
            <section class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">Brain cargo's packed. Let's sail.</h1>
                    <p class="hero-subtitle">Handpicked content just for you.</p>
                </div>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="video-count">0</span>
                        <span class="stat-label">Videos</span>
                    </div>
                    <div class="stat-divider"></div>
                    <div class="stat-item">
                        <span class="stat-number" id="article-count">0</span>
                        <span class="stat-label">Articles</span>
                    </div>
                </div>
            </section>

            
            <section id="urgent-quest" class="section urgent-quest-section hidden">
                <div class="section-header urgent-quest-header">
                    <h2 class="section-title urgent-quest-title">
                        <svg class="timer-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align:middle;margin-right:0.5rem;">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        Urgent Quest
                    </h2>
                    <div class="urgent-quest-timer" id="urgent-quest-timer">âˆž</div>
                </div>
                <div id="urgent-quest-content" class="urgent-quest-content"></div>
                <div class="urgent-quest-btn-row"><button id="urgent-quest-accept" class="urgent-quest-accept-btn">Accept</button></div>
            </section>

            
            <section id="continue-watching" class="section continue-watching-section hidden">
                <div class="section-header">
                    <h2 class="section-title">Continue Watching</h2>
                    <button id="clear-continue" class="clear-button">Clear All</button>
                </div>
                <div id="continue-watching-content" class="continue-watching-grid"></div>
            </section>

            
            <section class="section videos-section">
                <div class="section-header">
                    <h2 class="section-title">Recommended Videos</h2>
                    <div class="section-controls">
                        <button id="refresh-videos" class="refresh-button">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
                <div id="videos-grid" class="videos-grid">
                    
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                    <div class="video-skeleton"></div>
                </div>
            </section>

            
            <section class="section articles-section">
                <div class="section-header">
                    <h2 class="section-title">Featured Articles</h2>
                    <div class="section-controls">
                        <button id="refresh-articles" class="refresh-button">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <polyline points="1 20 1 14 7 14"></polyline>
                                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
                <div id="articles-grid" class="articles-grid">
                    
                    <div class="article-skeleton"></div>
                    <div class="article-skeleton"></div>
                    <div class="article-skeleton"></div>
                    <div class="article-skeleton"></div>
                </div>
            </section>
        </main>
    </div>

    
    <div id="article-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modal-title" class="modal-title">Loading...</h3>
                <div class="modal-controls">
                    <button id="open-original" class="modal-button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                            <polyline points="15,3 21,3 21,9"></polyline>
                            <line x1="10" y1="14" x2="21" y2="3"></line>
                        </svg>
                        Original
                    </button>
                    <button id="fullscreen-article" class="modal-button">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h6V2H2v8h2V4zm16 0v6h2V2h-8v2h6zm0 16h-6v2h8v-8h-2v6zM4 20v-6H2v8h8v-2H4z"></path>
                        </svg>
                        Fullscreen
                    </button>
                    <button id="close-modal" class="modal-button close-button">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <iframe id="article-iframe" src="" frameborder="0"></iframe>
                <div id="iframe-loading" class="iframe-loading">
                    <div class="loading-spinner"></div>
                    <p>Loading article...</p>
                </div>
            </div>
            <button id="back-to-feed" class="modal-button" style="margin-left:1rem;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                </svg>
                Back to Feed
            </button>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>
</html>
